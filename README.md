Pikmin Bloom 蘑菇挑戰報名系統 - README.md
最後更新時間：2025年6月9日

專案簡介 (Project Overview)
本專案旨在開發一個專為 Pikmin Bloom 遊戲社群設計的蘑菇挑戰報名網頁應用程式。 目標是取代傳統使用 Google 試算表進行報名的不便，解決匿名冒名、偷跑報名、報名數量限制等問題。 此系統將提供一個安全、公平、即時且富有遊戲化互動元素的平台，讓好友間的蘑菇挑戰協作更加流暢有趣。

專案狀態 (Project Status)
當前階段：✅ 第三階段核心功能已趨於完善！

此版本已經是一個功能極其完整、體驗高度流暢、且後端穩健的應用程式。不僅實現了所有使用者端的核心功能，更加入了豐富的遊戲化元素，已遠超第二階段的目標。

✅ 已完成項目
AuthUser & UserSelfService: 使用者驗證與自助服務
無 Email 登入流程: 成功實現「暱稱下拉式選單」登入，管理者可在後台以 [暱稱]@pikmin.sys 的統一格式建立使用者帳號。

穩定的登入/登出: 使用者可透過暱稱與密碼安全登入。登出功能經多次修正，採用 onAuthStateChange 監聽器，確保登出流程乾淨可靠。

使用者修改密碼: 在導覽列中整合了「修改密碼」功能，使用者可隨時自行更新密碼，提升帳號安全性。

管理者密碼重設流程: 確立了「管理者協助重設」的工作流程，並產出 repassword.html 作為管理者專用的離線工具，完美解決虛擬信箱無法收信的問題。

ChallengeCore & ChallengeInteract: 挑戰系統與互動
權限化發布功能: 只有具備「發菇者」相關角色的使用者，才會看到「發布新挑戰」按鈕。

高效發布介面: 發布表單包含預設值，並將「蘑菇種類」與「用餐時段」改為下拉選單，有效提升效率並防止輸入錯誤。

即時挑戰列表: 所有挑戰以卡片形式呈現，並透過 Supabase Realtime 功能，讓所有在線使用者的畫面都能即時同步更新。

智慧狀態按鈕: 卡片上的按鈕能根據使用者身份（是否為發ublish者）、報名狀態（是否已報名）與挑戰狀態（尚未開放/開放報名中/已額滿），智慧地顯示為不同按鈕，互動邏輯清晰。

即時報名名單: 在挑戰卡片上，直接顯示成功報名者的「名次」、「暱稱」與精確到毫秒的「報名時間」，大幅提升競爭感與趣味性。

發送狀態標籤: 發布者可在有報名者的卡片上，點擊切換「待發」/「已發」標籤，方便所有使用者追蹤挑戰進度。

開放時間倒數計時: 對於「預計開放」的挑戰，卡片上會顯示人性化的倒數計時（例如 1小時:25分鐘後開放報名），並在時間到時自動更新為可報名狀態。

個人化視圖篩選: 使用者可在「全部挑戰」、「我的報名」、「我的發布」（僅發菇者可見）三種視圖中自由切換，方便管理個人相關活動。

SignUpBase: 報名核心
原子化報名/取消: 報名與取消流程皆採用後端 RPC (資料庫函式) 處理，將「檢查名額」、「寫入/刪除資料」、「更新挑戰狀態」合併為單一原子操作，從根本上杜絕了高併發下的超額或狀態錯誤問題。

LeaderboardBase & LeaderboardAdvanced: 遊戲化排行榜
雙維度排行榜: 成功實作了「報名排行榜 (計次)」與「最速傳說 (反應時間)」兩種維度的排行榜。

雙週期切換: 兩種排行榜都支援「本週」與「本月」的週期切換，並能正確計算對應時間區間的數據。

優化排名邏輯: 排名算法納入「先達標者優先」的原則，讓排名更具公平性。

⏳ 下一步計畫 (最終階段建議)
您好！目前專案的核心功能已全部完成，使用者體驗也相當完善。接下來的開發將聚焦於「管理者體驗」與「特殊情況處理」，讓系統邁向完美。

報名狀態為「已額滿」時，若有成員取消報名，將蘑菇調整回名額3/4可報名狀態。

NotificationAutomation: 自動化管理 (優先級: 高)

目標: 設定每日定時自動刪除已標示為「已發」且「開放報名時間」超過 16 小時的舊挑戰，維持版面清爽。

AdminBase & AdminAdvanced: 建立管理員後台 (優先級: 高)

目標: 開發一個獨立的 admin.html 頁面，讓管理者登入後，可以透過網頁介面執行以下操作，徹底擺脫操作 Supabase 後台與本地工具的不便：

使用者管理: 新增使用者、指派/變更角色、重設使用者密碼。

系統選項管理: 動態增修「蘑菇種類」與「用餐時段」的下拉選單內容。

NoShowHandler: 缺席(No-Show)處理機制 (優先級: 中)

目標: 賦予「發菇者」權力，在挑戰卡片上標記遊戲中未到場的使用者。

連動機制:

被標記為「缺席」後，該名額自動釋出。

系統應記錄使用者的缺席次數，作為未來可能的管理依據。

（可選）發菇者可從候補名單或指定一位使用者遞補名額。

HostEfficiency: 發菇效率工具 (優先級: 低)

目標: 在已發布的挑戰卡片上，新增一個「複製設定」按鈕。點擊後，會自動打開「發布新挑戰」的視窗，並將該卡片的所有設定（蘑菇種類、名額、用餐時段等）都預先填入，讓發布者可以快速建立相似的挑戰。

完成以上功能後，整個專案將完全達成最初設定的所有目標，成為一個功能強大、體驗優良且易於管理的系統。祝您開發順利！